Декартово дерево. Определение и свойства.

Декартово дерево - это очень крутая структура данных. Это дерево имеет два значения(x,y) в каждой вершине. 

По ключам(x) это бинарное дерево поиска, то есть если взять вершину, то все ключи в левом поддереве будут меньше(и может быть равно, зависит от реализации) ключа в текущей вершине, а все ключи в правом больше. 

По приоритетам(y) это бинарная куча. Приоритет сыновей меньше(или равно, в зависимости от реализации).

Если правильно выбрать приоритеты, то дерево будет сбалансированно, если выбирать случайные числа, как приоритеты, то максимальная высота дерева будет примерно O(3log(n)), хотя в некоторой литературе O(4log(n)). 
Приоритеты позволяют однозначно указать дерево, которое будет построено, независимо от порядка добавления.

Декартово дерево правит миром за логарифм. 
С его помощью можно делать кучу разной шняги, включая сумму, минимум К-тая порядковая статистика, вставка произвольных элементов в произвольное место, переворот дерева. 

Почему дерево называют Декартовым в русской литературе и Cartesian Tree в зарубежной.
Если взять ключи(х), как координату вершины по иксу и приоритет как координату по игрику, получится все очень логично.

9	|
8	|
7	|     o
6	|    / \
5	|   /    o
4	|  o    /
3	| /\   o
2	|o  \   \   
1	|    o   o 
0	+---------
	0123456789

